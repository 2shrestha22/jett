name: Flutter CI
on:
    pull_request:
        branches:
            - main
jobs:
    analyze:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v5

            - name: Set up Flutter
              uses: subosito/flutter-action@v2
              with:
                  flutter-version: "stable"
                  flutter-version-file: mise.toml

            - name: Install dependencies
              run: flutter pub get

            - name: Run Build Runner
              run: flutter pub run build_runner build --delete-conflicting-outputs

            - name: Check diff
              run: git diff --exit-code

            - name: Analyze code
              run: flutter analyze

            # - name: Run tests
            #   run: flutter test
